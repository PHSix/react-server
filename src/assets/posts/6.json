{"author":"PHSix","id":6,"title":"ArchLinux 重装时遇到的坑","created_at":"2021-04-25T12:00:59Z","body":["### 1. __使用systemd设置gdm或lightdm设置开机自启之后重启开启发现没有正常进入gdm或者lightdm界面，而是只有显示一个光标在不断闪烁__\r\n\r\n解决办法：___这个问题在reddit上的archlinux社区中找到了解决方法___\r\n_出现问题的原因：_\r\n![image](https://user-images.githubusercontent.com/57695072/115992579-01c81500-a601-11eb-8353-a8a495912c4c.png)\r\n\r\n__大体上的意思就是说lightdm的加载会在内核的视频模块(应该是)之前加载，所以导致显示渲染不出来(gdm也是遇到的同样问题)__\r\n\r\n解决这个问题的方法也十分的简单，只要在/etc/systemd/system/display-manager.service这个文件里面的[Service]下面加上一个：\r\n```bash\r\nExecStartPre=/usr/bin/sleep 1\r\n```","### 2. xprofile，profile和pam_environment的区别与不同\r\n\r\n在安装fcitx5输入法的时候需要添加一些环境变量到系统中，但是写入的文件在不同文章里面我们可以看到有编辑不同的文件。\r\n\r\n有的说到了`/etc/profile`、`~/.xprofile`和`~/.pam_environment`这三个文件（其中archwiki给出的是编辑`~/.xprofile`的方案）。\r\n\r\n不同：\r\n- `profile` 是用户在登陆shell时候会自动加载的一个文件(不仅仅是bash用户，也可以是zsh等)，里面存储的是shell中环境变量的一些信息。\r\n- `xprofile` 当用户是通过显示管理器（或startix等方式）进入的桌面时，系统会默认加载xprofile作为整个X服务的一个环境变量，这个变量同样可以在shell中用`env`命令查看到。\r\n- `pam_environment` 这个文件相当于用户级的environment，被系统中的`PAM-env`模块使用，只作用在当前用户下，全局可以作用编辑 __/etc/environment__ 来设置所有用户的环境变量","### 3.Gnome 设置快捷键 `super+数字` 为切换工作区的时候有几率无效\r\n从window manager 到desktop manager 的最大的不适应就是切换工作区变得复杂了，系统就算默认带有快捷键也是难用或是不习惯。好在gnome在设置里面给了我们设置切换工作区快捷键的选项。但是当我切换到 `super+数字` 来切换工作区的时候，系统默认的有一些快捷键正好冲突了(如果使用了dash-to-dock则还会有一些额外的按键映射)，这些我们都可以通过gnome官方提供的工具 __gsetting__ 来解决。解决方法为：\r\n\r\n```bash\r\n# 关闭dash-to-dock的默认按键映射\r\ngsettings set org.gnome.shell.extensions.dash-to-dock hot-keys false\r\nfor i in {1..9}; do\r\n    gsettings set org.gnome.shell.extensions.dash-to-dock app-hotkey-$i '[]'\r\n   # 关闭gnome 默认super + 数字键的按键映射\r\n    gsettings set org.gnome.shell.keybindings switch-to-application-$i '[]'\r\ndone\r\n```"]}