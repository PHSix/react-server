{"author":"PHSix","id":3,"title":"如何用lua来给neovim写一套主题","created_at":"2021-03-07T13:07:33Z","body":["# 要求：\r\n- neovim版本大于等于0.5.0,也就是nightly版本(neovim在nightly版本里面加入了对lua写配置的支持)\r\n- 对lua的基础语法有一定的了解(包括但不限于包的导入，循环控制，条件判断，面向对象等)\r\n# 写neovim主题原理\r\n因为neovim是由vim fork下来的，所以neovim的主题配置制作可以参考vim的help以及一些已经存在的neovim主题。\r\n\r\n简单来说vim的主题不同颜色本质上就是使用vim的highlight命令来指定不同的`{highlight-group}`来修改\r\n\r\n## 关于highlight这一个命令的使用\r\n通过`:h highlight`我们可以查到vim官方文档提供的说明文件，里面写到\r\n> :hi[ghlight] [default] {group-name} {key}={arg} ..\r\n\r\n利用这个方法我们可以控制每一个highlight group的色彩，进而可以控制整个主题页面的颜色。\r\n\r\n具体哪一个group控制那些部分的显示我们可以看这里\r\n[http://vimcdoc.sourceforge.net/doc/syntax.html#syntax.txt](http://vimcdoc.sourceforge.net/doc/syntax.html#syntax.txt)\r\n\r\n然后就是highlight命令里面的key字段，key字段我们可以传入一些参数去guifg，cterm，term等，这些参数代表着相对的highlight group显示出来的颜色和样式。\r\n\r\n这里有一个要注意的是，cterm和gui的区别，cterm是tty下显示的颜色，只有0至255可供选择，而gui是图形化界面显示的颜色，包括现在在使用的终端。默认情况下如果gui没有设置相应的样式的话vim会显示cterm的样式。\r\n\r\n## 通过lua调用viml来修改highlight group\r\n\r\nLua里面没有相应的直接调用viml关键字(如echo, call等)的方法，所以我们需要使用vim.cmd或者vim.api.nvim_command来设置我们的highlight group\r\n\r\n例如:\r\n```lua\r\nvim.cmd [[hi link NormalFloat Normal]]\r\n```"]}